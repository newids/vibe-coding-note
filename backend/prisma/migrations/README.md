# Database Migrations

This directory contains Prisma migration files that define the database schema changes over time.

## How to use migrations

1. **Create a new migration:**

   ```bash
   npm run db:migrate
   ```

   This will prompt you for a migration name and generate the migration files.

2. **Apply migrations to production:**

   ```bash
   npm run db:migrate:deploy
   ```

3. **Reset database (development only):**
   ```bash
   npm run db:reset
   ```

## Migration Files

Migration files are automatically generated by Prisma and should not be edited manually. Each migration includes:

- `migration.sql` - The SQL commands to apply the changes
- Timestamp and name for ordering

## Initial Migration

To create the initial migration after setting up the database:

```bash
# Start the database
docker-compose up -d

# Create and apply the initial migration
npm run db:migrate -- --name init

# Seed the database
npm run db:seed
```

This will create all the tables defined in the Prisma schema:

- users
- notes
- comments
- categories
- tags
- note_tags (junction table)
- likes
